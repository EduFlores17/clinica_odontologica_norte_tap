---
// src/components/Servicios.astro
import { servicios } from "../scripts/servicios.js";
---

<!-- Contenedor principal -->
<div class="relative py-8 max-w-5xl mx-auto font-display">
  <!-- Swiper container -->
  <swiper-container
    slides-per-view="3"
    space-between="16"
    navigation="true"
    pagination="false"
    autoplay-delay="3000"
    autoplay-disable-on-interaction="false"
    breakpoints='{"360":{"slidesPerView":1,"spaceBetween":16},"640":{"slidesPerView":1,"spaceBetween":16},"768":{"slidesPerView":2,"spaceBetween":20},"1024":{"slidesPerView":3,"spaceBetween":24}}'
    class="overflow-visible px-4"
    style="--swiper-navigation-color: #0077b6; --swiper-navigation-size: 24px;"
  >
    {servicios.map((servicio) => (
      <swiper-slide key={servicio.titulo} aria-label={`Servicio: ${servicio.titulo}`}>
        <article class="h-full flex flex-col bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden min-h-[400px] sm:min-h-[440px]">
          <div class="w-full h-44 sm:h-52 overflow-hidden">
            <img 
              src={servicio.imagen} 
              alt={servicio.titulo}
              class="w-full h-full object-cover object-center"
              loading="lazy"
              width="400"
              height="300"
            />
          </div>
          <div class="flex flex-col justify-between p-4 flex-grow">
            <div>
              <h3 class="font-bold text-text1 text-lg mb-2">
                {servicio.titulo}
              </h3>
              <p class="text-text4 leading-snug mb-4 line-clamp-4">
                {servicio.texto}
              </p>
            </div>
            <a
              href="#contacto"
              class="mt-auto text-sm font-semibold text-font2 hover:underline transition"
              aria-label={`Más información sobre ${servicio.titulo}`}
            >
              Saber más →
            </a>
          </div>
        </article>
      </swiper-slide>
    ))}
  </swiper-container>

  <!-- Estilos para las flechas de navegación -->
  <style>
    swiper-container::part(button-prev),
    swiper-container::part(button-next) {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    swiper-container::part(button-prev) {
      left: 0;
    }
    swiper-container::part(button-next) {
      right: 0;
    }
    @media (max-width: 768px) {
      swiper-container::part(button-prev) {
        left: -5px;
      }
      swiper-container::part(button-next) {
        right: -5px;
      }
    }
  </style>
</div>